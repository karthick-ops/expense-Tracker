<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expense Tracker</title>
  <style>
    :root{
      --bg:#f4f7fa; --fg:#111; --muted:#6b7280; --brand:#158b15; --brand-2:#28e231; --card:#fff; --border:#ccc; --red:#ff0d0d; --green:#10b981;
    }
    body{margin:0; font:16px system-ui; background:var(--bg); color:var(--fg)}
    .container{max-width: 1000px; margin: 32px auto; padding: 0 16px}
    header{display:flex; align-items:center; justify-content:space-between; margin-bottom:16px}
    h1{margin:0}
    .grid{display:grid; gap:12px}
    .cards{grid-template-columns: repeat(auto-fit, minmax(220px,1fr))}
    .card{background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px}
    .summary .value{font-size:20px; font-weight:700}
    .summary .label{color:var(--muted); font-size:12px}
    form#expense-form{display:grid; grid-template-columns: repeat(6, 1fr); gap:10px; margin-bottom:16px}
    form#expense-form input, form#expense-form select, form#expense-form button{padding:10px; border-radius:8px; border:1px solid var(--border)}
    .btn{background:var(--brand); color:#fff; cursor:pointer}
    table{width:100%; border-collapse:collapse; margin-top:16px}
    th,td{border:1px solid var(--border); padding:8px; text-align:left}
    td.amt{text-align:right}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ðŸ’° Expense Tracker</h1>
      <button id="clear-all" class="btn">Clear All</button>
    </header>

    <!-- Balance input -->
    <div class="card">
      <label for="overall-balance">Overall Amount I Have:</label>
      <input type="number" id="overall-balance" placeholder="Enter starting balance" />
      <button id="save-balance" class="btn">Save Balance</button>
    </div>

    <!-- Summary -->
    <section class="grid cards" style="margin-top:16px">
      <div class="card summary"><div class="label">Credit Cash</div><div class="value" id="credit-cash">â‚¹0</div></div>
      <div class="card summary"><div class="label">Debit Cash</div><div class="value" id="debit-cash">â‚¹0</div></div>
      <div class="card summary"><div class="label">Balance</div><div class="value" id="balance">â‚¹0</div></div>
    </section>

    <!-- Form -->
    <form id="expense-form">
      <input id="date" type="date" required />
      <input id="desc" type="text" placeholder="Description" required />
      <select id="category">
        <option>Food</option><option>Transport</option><option>Bills</option><option>Other</option>
      </select>
      <select id="type">
        <option value="credit">Credit (+)</option>
        <option value="debit">Debit (-)</option>
      </select>
      <input id="amount" type="number" placeholder="Amount" required />
      <button type="submit" class="btn">Add</button>
    </form>

    <!-- Table -->
    <table>
      <thead><tr><th>Date</th><th>Description</th><th>Category</th><th>Type</th><th>Amount</th></tr></thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

  <script>
    (() => {
      const KEY = "expense-tracker-v2";
      const BAL_KEY = "expense-tracker-balance";
      let expenses = [];
      let balance = 0;

      const tbody = document.getElementById("tbody");
      const form = document.getElementById("expense-form");
      const creditEl = document.getElementById("credit-cash");
      const debitEl = document.getElementById("debit-cash");
      const balanceEl = document.getElementById("balance");
      const balInput = document.getElementById("overall-balance");

      function inr(x){ return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(x); }
      function load(){
        try{ expenses = JSON.parse(localStorage.getItem(KEY)) || []; } catch{ expenses = []; }
        balance = Number(localStorage.getItem(BAL_KEY) || 0);
        balInput.value = balance || "";
      }
      function save(){ localStorage.setItem(KEY, JSON.stringify(expenses)); localStorage.setItem(BAL_KEY, balance); }

      function render(){
        tbody.innerHTML="";
        let totalCredit=0,totalDebit=0;
        for(const e of expenses){
          if(e.type==="credit") totalCredit+=e.amount; else totalDebit+=e.amount;
          const tr=document.createElement("tr");
          tr.innerHTML=`<td>${e.date}</td><td>${e.desc}</td><td>${e.category}</td><td>${e.type}</td><td class="amt">${inr(e.amount)}</td>`;
          tbody.appendChild(tr);
        }
        creditEl.textContent=inr(totalCredit);
        debitEl.textContent=inr(totalDebit);
        balanceEl.textContent=inr(balance);
      }

      form.addEventListener("submit",ev=>{
        ev.preventDefault();
        const data={
          date:form.date.value,
          desc:form.desc.value,
          category:form.category.value,
          type:form.type.value,
          amount:Number(form.amount.value)
        };
        expenses.push(data);
        if(data.type==="credit") balance+=data.amount; else balance-=data.amount;
        save(); render(); form.reset();
      });

      document.getElementById("save-balance").addEventListener("click",()=>{
        balance=Number(balInput.value)||0;
        save(); render();
      });

      document.getElementById("clear-all").addEventListener("click",()=>{
        if(confirm("Clear all expenses?")){ expenses=[]; save(); render(); }
      });

      load(); render();
    })();
  </script>
</body>
</html>
